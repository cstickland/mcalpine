!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).CategoryArchive=t()}(this,(function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function o(){return Object.create(null)}function r(e){e.forEach(n)}function a(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,c;function u(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function l(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function f(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function m(){return h(" ")}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.data!==t&&(e.data=t)}function b(e){c=e}function x(e){(function(){if(!c)throw new Error("Function called outside component initialization");return c})().$$.on_mount.push(e)}const P=[],v=[];let w=[];const C=[],I=Promise.resolve();let _=!1;function T(e){w.push(e)}function N(e){C.push(e)}const k=new Set;let E=0;function U(){if(0!==E)return;const e=c;do{try{for(;E<P.length;){const e=P[E];E++,b(e),A(e.$$)}}catch(e){throw P.length=0,E=0,e}for(b(null),P.length=0,E=0;v.length;)v.pop()();for(let e=0;e<w.length;e+=1){const t=w[e];k.has(t)||(k.add(t),t())}w.length=0}while(P.length);for(;C.length;)C.pop()();_=!1,k.clear(),b(e)}function A(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(T)}}const j=new Set;let L;function M(){L={r:0,c:[],p:L}}function F(){L.r||r(L.c),L=L.p}function O(e,t){e&&e.i&&(j.delete(e),e.i(t))}function S(e,t,n,o){if(e&&e.o){if(j.has(e))return;j.add(e),L.c.push((()=>{j.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function z(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function q(e){e&&e.c()}function B(e,t,o,i){const{fragment:s,after_update:c}=e.$$;s&&s.m(t,o),i||T((()=>{const t=e.$$.on_mount.map(n).filter(a);e.$$.on_destroy?e.$$.on_destroy.push(...t):r(t),e.$$.on_mount=[]})),c.forEach(T)}function D(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];w.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),w=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(P.push(e),_||(_=!0,I.then(U)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function R(t,n,a,i,s,u,l,f=[-1]){const d=c;b(t);const p=t.$$={fragment:null,ctx:[],props:u,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:n.target||d.$$.root};l&&l(p.root);let h=!1;if(p.ctx=a?a(t,n.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&s(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),h&&J(t,e)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(g)}else p.fragment&&p.fragment.c();n.intro&&O(t.$$.fragment),B(t,n.target,n.anchor,n.customElement),U()}b(d)}class G{$destroy(){D(this,1),this.$destroy=e}$on(t,n){if(!a(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function H(t){let n;return{c(){n=p("div")},m(e,t){d(e,n,t)},p:e,d(e){e&&g(n)}}}function K(e){let t,n;return{c(){t=p("img"),$(t,"class","category-card-image"),u(t.src,n=e[1])||$(t,"src",n),$(t,"alt",e[2])},m(e,n){d(e,t,n)},p(e,o){2&o&&!u(t.src,n=e[1])&&$(t,"src",n),4&o&&$(t,"alt",e[2])},d(e){e&&g(t)}}}function Q(t){let n,o,r,a,i,s,c,u,l,b;function x(e,t){return e[1]&&e[1].length>0?K:H}let P=x(t),v=P(t);return{c(){n=p("li"),o=p("a"),r=p("div"),v.c(),a=m(),i=p("div"),s=p("h5"),c=h(t[3]),u=m(),l=p("a"),b=h(t[3]),$(i,"class","category-link-container"),$(r,"class","category-card"),$(o,"class","category-card"),$(o,"href",t[0]),$(l,"class","category-card-link-small"),$(l,"href",t[0]),$(n,"class","category-card-container")},m(e,t){d(e,n,t),f(n,o),f(o,r),v.m(r,null),f(r,a),f(r,i),f(i,s),f(s,c),f(n,u),f(n,l),f(l,b)},p(e,[t]){P===(P=x(e))&&v?v.p(e,t):(v.d(1),v=P(e),v&&(v.c(),v.m(r,a))),8&t&&y(c,e[3]),1&t&&$(o,"href",e[0]),8&t&&y(b,e[3]),1&t&&$(l,"href",e[0])},i:e,o:e,d(e){e&&g(n),v.d()}}}function V(e,t,n){let{url:o}=t,{imageUrl:r}=t,{imageAlt:a}=t,{title:i}=t;return e.$$set=e=>{"url"in e&&n(0,o=e.url),"imageUrl"in e&&n(1,r=e.imageUrl),"imageAlt"in e&&n(2,a=e.imageAlt),"title"in e&&n(3,i=e.title)},[o,r,a,i]}class W extends G{constructor(e){super(),R(this,e,V,Q,i,{url:0,imageUrl:1,imageAlt:2,title:3})}}const X=[];function Y(t,n=e){let o;const r=new Set;function a(e){if(i(t,e)&&(t=e,o)){const e=!X.length;for(const e of r)e[1](),X.push(e,t);if(e){for(let e=0;e<X.length;e+=2)X[e][0](X[e+1]);X.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(i,s=e){const c=[i,s];return r.add(c),1===r.size&&(o=n(a)||e),i(t),()=>{r.delete(c),0===r.size&&o&&(o(),o=null)}}}}const Z=Y([]),ee=Y(1);function te(e,t){return`{\n      productCategories(first: ${e}, after: "${t}") {\n        edges {\n          node {\n            id\n            name\n            parentId\n            link\n            customFields {\n              categoryImage {\n                altText\n                sourceUrl(size: MEDIUM)\n              }\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }`}function ne(e,t){return`{\n      warranties(first: ${e}, after: "${t}") {\n        edges {\n          node {\n            id\n            title\n            link\n            featuredImage {\n              node {\n                altText\n                sourceUrl(size: MEDIUM)\n              }\n            }\n          }\n        }\n        pageInfo {\n          endCursor\n          hasNextPage\n        }\n      }\n    }`}async function oe(e){const t=await fetch("/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e})});return await t.json()}function re(t){let n,o,r,a,i=t[0]?"Loading...":"Load More";return{c(){n=p("button"),o=h(i),$(n,"class","btn btn-black svelte-pgpjbr"),$(n,"aria-label","load more")},m(e,i){var s,c,u,l;d(e,n,i),f(n,o),r||(s=n,c="click",u=t[1],s.addEventListener(c,u,l),a=()=>s.removeEventListener(c,u,l),r=!0)},p(e,[t]){1&t&&i!==(i=e[0]?"Loading...":"Load More")&&y(o,i)},i:e,o:e,d(e){e&&g(n),r=!1,a()}}}function ae(e,t,n){let o;l(e,Z,(e=>n(6,o=e)));let{archiveType:r=""}=t,{endCursor:a}=t,{hasNextPage:i}=t,{postsPerPage:s}=t,c=!1;return e.$$set=e=>{"archiveType"in e&&n(4,r=e.archiveType),"endCursor"in e&&n(2,a=e.endCursor),"hasNextPage"in e&&n(3,i=e.hasNextPage),"postsPerPage"in e&&n(5,s=e.postsPerPage)},[c,async function(){n(0,c=!0);let e=[];if("categories"==r){const t=te(s,a);let o=await oe(t);o.data.productCategories.edges.forEach((t=>{let n={title:t.node.name,url:t.node.link,imageUrl:t.node.customFields.categoryImage?.sourceUrl,imageAlt:t.node.customFields.categoryImage?.altText};e.push(n)})),n(2,a=o.data.productCategories.pageInfo.endCursor),n(3,i=o.data.productCategories.pageInfo.hasNextPage)}if("warranties"==r){const t=ne(s,a);let o=await oe(t);o.data.warranties.edges.forEach((t=>{let n={title:t.node.title,url:t.node.link,imageUrl:t.node.featuredImage.node.sourceUrl,imageAlt:t.node.featuredImage.node.altText};e.push(n)})),n(2,a=o.data.warranties.pageInfo.endCursor),n(3,i=o.data.warranties.pageInfo.hasNextPage)}Z.set([...o,...e]),n(0,c=!1)},a,i,r,s]}class ie extends G{constructor(e){super(),R(this,e,ae,re,i,{archiveType:4,endCursor:2,hasNextPage:3,postsPerPage:5})}}function se(e,t,n){const o=e.slice();return o[8]=t[n],o}function ce(e){let t,n,o=[...e[4]],r=[];for(let t=0;t<o.length;t+=1)r[t]=ue(se(e,o,t));const a=e=>S(r[e],1,1,(()=>{r[e]=null}));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=h("")},m(e,o){for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,o);d(e,t,o),n=!0},p(e,n){if(16&n){let i;for(o=[...e[4]],i=0;i<o.length;i+=1){const a=se(e,o,i);r[i]?(r[i].p(a,n),O(r[i],1)):(r[i]=ue(a),r[i].c(),O(r[i],1),r[i].m(t.parentNode,t))}for(M(),i=o.length;i<r.length;i+=1)a(i);F()}},i(e){if(!n){for(let e=0;e<o.length;e+=1)O(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)S(r[e]);n=!1},d(e){!function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e),e&&g(t)}}}function ue(e){let n,o;const r=[e[8]];let a={};for(let e=0;e<r.length;e+=1)a=t(a,r[e]);return n=new W({props:a}),{c(){q(n.$$.fragment)},m(e,t){B(n,e,t),o=!0},p(e,t){const o=16&t?function(e,t){const n={},o={},r={$$scope:1};let a=e.length;for(;a--;){const i=e[a],s=t[a];if(s){for(const e in i)e in s||(o[e]=1);for(const e in s)r[e]||(n[e]=s[e],r[e]=1);e[a]=s}else for(const e in i)r[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}(r,[(a=e[8],"object"==typeof a&&null!==a?a:{})]):{};var a;n.$set(o)},i(e){o||(O(n.$$.fragment,e),o=!0)},o(e){S(n.$$.fragment,e),o=!1},d(e){D(n,e)}}}function le(e){let t,n,o,r;function a(t){e[5](t)}function i(t){e[6](t)}let s={archiveType:e[0],postsPerPage:e[1]};return void 0!==e[3]&&(s.hasNextPage=e[3]),void 0!==e[2]&&(s.endCursor=e[2]),t=new ie({props:s}),v.push((()=>z(t,"hasNextPage",a))),v.push((()=>z(t,"endCursor",i))),{c(){q(t.$$.fragment)},m(e,n){B(t,e,n),r=!0},p(e,r){const a={};1&r&&(a.archiveType=e[0]),2&r&&(a.postsPerPage=e[1]),!n&&8&r&&(n=!0,a.hasNextPage=e[3],N((()=>n=!1))),!o&&4&r&&(o=!0,a.endCursor=e[2],N((()=>o=!1))),t.$set(a)},i(e){r||(O(t.$$.fragment,e),r=!0)},o(e){S(t.$$.fragment,e),r=!1},d(e){D(t,e)}}}function fe(e){let t,n,o,r,a,i,s=ce(e),c=e[3]&&le(e);return{c(){t=p("section"),n=p("div"),o=p("ul"),s&&s.c(),r=m(),a=p("div"),c&&c.c(),$(o,"class","insight-archive-grid mobile-two-column"),$(n,"class","insight-archive-grid-container"),$(a,"class","pagination-container"),$(t,"class","insight-archive")},m(e,u){d(e,t,u),f(t,n),f(n,o),s&&s.m(o,null),f(t,r),f(t,a),c&&c.m(a,null),i=!0},p(e,[t]){s.p(e,t),e[3]?c?(c.p(e,t),8&t&&O(c,1)):(c=le(e),c.c(),O(c,1),c.m(a,null)):c&&(M(),S(c,1,1,(()=>{c=null})),F())},i(e){i||(O(s),O(c),i=!0)},o(e){S(s),S(c),i=!1},d(e){e&&g(t),s&&s.d(),c&&c.d()}}}function de(e,t,n){let o;l(e,Z,(e=>n(4,o=e)));let{archiveType:r=""}=t,{postsPerPage:a}=t;const i=new URLSearchParams(window.location.search);ee.set(parseInt(i.get("pagination"))||1);let s="",c=!1;return x((async()=>{let e;var t;if(o=[],t=o,Z.set(t),"warranties"==r){e=ne(a,s);let t=[],o=await oe(e);o.data.warranties.edges.forEach((e=>{let n={title:e.node.title,url:e.node.link,imageUrl:e.node.featuredImage.node.sourceUrl,imageAlt:e.node.featuredImage.node.altText};t.push(n)})),Z.set(t),n(2,s=o.data.warranties.pageInfo.endCursor),n(3,c=o.data.warranties.pageInfo.hasNextPage)}if("categories"==r){e=te(a,s);let t=[],o=await oe(e);o.data.productCategories.edges.forEach((e=>{let n={title:e.node.name,url:e.node.link,imageUrl:e.node.customFields.categoryImage?.sourceUrl,imageAlt:e.node.customFields.categoryImage?.altText};t.push(n)})),Z.set(t),n(2,s=o.data.productCategories.pageInfo.endCursor),n(3,c=o.data.productCategories.pageInfo.hasNextPage)}})),e.$$set=e=>{"archiveType"in e&&n(0,r=e.archiveType),"postsPerPage"in e&&n(1,a=e.postsPerPage)},[r,a,s,c,o,function(e){c=e,n(3,c)},function(e){s=e,n(2,s)}]}return class extends G{constructor(e){super(),R(this,e,de,fe,i,{archiveType:0,postsPerPage:1})}}}));
//# sourceMappingURL=category-archive.js.map
